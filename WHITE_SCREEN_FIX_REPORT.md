# –û—Ç—á–µ—Ç –æ –ø—Ä–æ–±–ª–µ–º–∞—Ö —Å –±–µ–ª—ã–º —ç–∫—Ä–∞–Ω–æ–º –∏ –∏—Ö —Ä–µ—à–µ–Ω–∏—è—Ö

## –ü—Ä–æ–±–ª–µ–º—ã

### 1. **–û—à–∏–±–∫–∞ –≤ RadialMenu**
```
RadialMenu.tsx:161 Uncaught ReferenceError: centerX is not defined
```

### 2. **–û—à–∏–±–∫–∏ 400 –æ—Ç Supabase**
```
cicmapcwlvdatmgwdylh.supabase.co/rest/v1/zones?select=*&project_id=eq.3&order=created_at.desc:1 Failed to load resource: the server responded with a status of 400 ()
```

### 3. **–ë–µ–ª—ã–π —ç–∫—Ä–∞–Ω –ø–æ—Å–ª–µ –∫–ª–∏–∫–∞**
–ü—Ä–∏ –ø–µ—Ä–≤–æ–º –∫–ª–∏–∫–µ –Ω–∞ –ø—É—Å—Ç—É—é —è—á–µ–π–∫—É –ø–æ—è–≤–ª—è–µ—Ç—Å—è –ø–æ–ª–Ω–æ—Å—Ç—å—é –±–µ–ª—ã–π —ç–∫—Ä–∞–Ω.

## –†–µ—à–µ–Ω–∏—è

### 1. **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –æ—à–∏–±–∫–∞ –≤ RadialMenu**
**–ü—Ä–æ–±–ª–µ–º–∞:** –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ `centerX` –∏ `centerY` –±—ã–ª–∏ —É–¥–∞–ª–µ–Ω—ã, –Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏—Å—å –≤ –∫–æ–¥–µ.

**–†–µ—à–µ–Ω–∏–µ:** –î–æ–±–∞–≤–ª–µ–Ω—ã –ª–æ–∫–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –≤ —Ñ—É–Ω–∫—Ü–∏–∏ map:
```typescript
{options.map((option) => {
  const angleRad = (option.angle * Math.PI) / 180
  const centerX = 0  // –î–æ–±–∞–≤–ª–µ–Ω–æ
  const centerY = 0  // –î–æ–±–∞–≤–ª–µ–Ω–æ
  const x = centerX + radius * Math.cos(angleRad)
  const y = centerY + radius * Math.sin(angleRad)
  // ...
})}
```

### 2. **–£–ª—É—á—à–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –≤ useProjectData**
**–ü—Ä–æ–±–ª–µ–º–∞:** –û—à–∏–±–∫–∏ 400 –æ—Ç Supabase –±–ª–æ–∫–∏—Ä–æ–≤–∞–ª–∏ –∑–∞–≥—Ä—É–∑–∫—É –¥–∞–Ω–Ω—ã—Ö.

**–†–µ—à–µ–Ω–∏–µ:** –î–æ–±–∞–≤–ª–µ–Ω–∞ –¥–µ—Ç–∞–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–∏–ø–∞ –¥–∞–Ω–Ω—ã—Ö:
```typescript
// –ó–∞–≥—Ä—É–∂–∞–µ–º –∑–æ–Ω—ã
try {
  const zonesData = await zoneService.getZones(projectId)
  console.log('Zones loaded:', zonesData.length)
  setZones(zonesData)
} catch (err) {
  console.error('Error loading zones:', err)
  setZones([]) // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –ø—É—Å—Ç–æ–π –º–∞—Å—Å–∏–≤ –≤–º–µ—Å—Ç–æ –æ—à–∏–±–∫–∏
}
```

### 3. **–°–æ–∑–¥–∞–Ω –¥–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫–∏–π —Å–∫—Ä–∏–ø—Ç**
–°–æ–∑–¥–∞–Ω —Ñ–∞–π–ª `DIAGNOSE_DATABASE_ISSUES.sql` –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏:
- –°—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è —Ç–∞–±–ª–∏—Ü
- –°—Ç—Ä—É–∫—Ç—É—Ä—ã —Ç–∞–±–ª–∏—Ü
- RLS –ø–æ–ª–∏—Ç–∏–∫
- –î–∞–Ω–Ω—ã—Ö –≤ —Ç–∞–±–ª–∏—Ü–∞—Ö
- –ü—Ä–∞–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

## –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã –æ—à–∏–±–æ–∫ 400

### 1. **–û—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–µ —Ç–∞–±–ª–∏—Ü—ã**
–¢–∞–±–ª–∏—Ü—ã `zones`, `zone_cells`, `hex_cells`, `buildings`, `zone_objects` –º–æ–≥—É—Ç –Ω–µ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞—Ç—å –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö.

### 2. **RLS –ø–æ–ª–∏—Ç–∏–∫–∏**
Row Level Security –º–æ–∂–µ—Ç –±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –∑–∞–ø—Ä–æ—Å—ã –∫ —Ç–∞–±–ª–∏—Ü–∞–º.

### 3. **–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–∞–±–ª–∏—Ü**
–ö–æ–ª–æ–Ω–∫–∏ –º–æ–≥—É—Ç –æ—Ç—Å—É—Ç—Å—Ç–≤–æ–≤–∞—Ç—å –∏–ª–∏ –∏–º–µ—Ç—å –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ —Ç–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö.

### 4. **–ü—Ä–æ–±–ª–µ–º—ã —Å –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–µ–π**
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –Ω–µ –∏–º–µ—Ç—å –ø—Ä–∞–≤ –Ω–∞ —á—Ç–µ–Ω–∏–µ —Ç–∞–±–ª–∏—Ü.

## –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–µ

### 1. **–í—ã–ø–æ–ª–Ω–∏—Ç–µ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫–∏–π —Å–∫—Ä–∏–ø—Ç**
```sql
-- –í—ã–ø–æ–ª–Ω–∏—Ç–µ DIAGNOSE_DATABASE_ISSUES.sql –≤ SQL Editor Supabase
```

### 2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è**
–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤ `.env` —Ñ–∞–π–ª–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã:
```
VITE_SUPABASE_URL=your_supabase_url
VITE_SUPABASE_ANON_KEY=your_supabase_anon_key
```

### 3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞**
–ò—â–∏—Ç–µ –æ—à–∏–±–∫–∏:
- 400 –æ—à–∏–±–∫–∏ –æ—Ç Supabase
- –û—à–∏–±–∫–∏ JavaScript
- –ü—Ä–æ–±–ª–µ–º—ã —Å –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–µ–π

## –í—Ä–µ–º–µ–Ω–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è

### 1. **–û—Ç–∫–ª—é—á–µ–Ω–∏–µ RLS (–≤—Ä–µ–º–µ–Ω–Ω–æ)**
```sql
-- –í—Ä–µ–º–µ–Ω–Ω–æ –æ—Ç–∫–ª—é—á–∏—Ç–µ RLS –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
ALTER TABLE zones DISABLE ROW LEVEL SECURITY;
ALTER TABLE zone_cells DISABLE ROW LEVEL SECURITY;
ALTER TABLE hex_cells DISABLE ROW LEVEL SECURITY;
ALTER TABLE buildings DISABLE ROW LEVEL SECURITY;
ALTER TABLE zone_objects DISABLE ROW LEVEL SECURITY;
```

### 2. **–°–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü (–µ—Å–ª–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç)**
–í—ã–ø–æ–ª–Ω–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç—ã —Å–æ–∑–¥–∞–Ω–∏—è —Ç–∞–±–ª–∏—Ü –∏–∑ –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö –æ—Ç—á–µ—Ç–æ–≤.

### 3. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏**
–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω –≤ Supabase.

## –†–µ–∑—É–ª—å—Ç–∞—Ç

### ‚úÖ **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:**
- –û—à–∏–±–∫–∞ `centerX is not defined` –≤ RadialMenu
- –£–ª—É—á—à–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –≤ useProjectData
- –î–æ–±–∞–≤–ª–µ–Ω–æ –¥–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

### ‚ö†Ô∏è **–¢—Ä–µ–±—É–µ—Ç –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏:**
- –û—à–∏–±–∫–∏ 400 –æ—Ç Supabase
- –ü—Ä–∏—á–∏–Ω—ã –±–µ–ª–æ–≥–æ —ç–∫—Ä–∞–Ω–∞

### üîß **–°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:**
1. –í—ã–ø–æ–ª–Ω–∏—Ç–µ `DIAGNOSE_DATABASE_ISSUES.sql`
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü
3. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ RLS –ø–æ–ª–∏—Ç–∏–∫–∏
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

## –§–∞–π–ª—ã –∏–∑–º–µ–Ω–µ–Ω—ã:
- `src/components/RadialMenu.tsx` - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –æ—à–∏–±–∫–∞ —Å centerX
- `src/hooks/useProjectData.ts` - —É–ª—É—á—à–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- `DIAGNOSE_DATABASE_ISSUES.sql` - —Å–æ–∑–¥–∞–Ω –¥–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫–∏–π —Å–∫—Ä–∏–ø—Ç

## –°—Ç–∞—Ç—É—Å:
‚úÖ **–ò–°–ü–†–ê–í–õ–ï–ù–û** - –æ—à–∏–±–∫–∞ RadialMenu
‚ö†Ô∏è **–¢–†–ï–ë–£–ï–¢ –î–ò–ê–ì–ù–û–°–¢–ò–ö–ò** - –æ—à–∏–±–∫–∏ Supabase –∏ –±–µ–ª—ã–π —ç–∫—Ä–∞–Ω 