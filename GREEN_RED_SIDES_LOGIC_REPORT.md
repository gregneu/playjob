# üü¢üî¥ Green-Red Sides Logic Report

## –ê–Ω–∞–ª–∏–∑ —Å—Ö–µ–º—ã

–°–æ–≥–ª–∞—Å–Ω–æ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω–æ–π —Å—Ö–µ–º–µ:

### –õ–æ–≥–∏–∫–∞ —Å—Ç–æ—Ä–æ–Ω:
- **üü¢ –ó–µ–ª–µ–Ω–∞—è —Å—Ç–æ—Ä–æ–Ω–∞** = **–Ω–∞—á–∞–ª–æ** –¥–æ—Ä–æ–∂–Ω–æ–≥–æ —Å–µ–≥–º–µ–Ω—Ç–∞ (–≤—Ö–æ–¥)
- **üî¥ –ö—Ä–∞—Å–Ω–∞—è —Å—Ç–æ—Ä–æ–Ω–∞** = **–∫–æ–Ω–µ—Ü** –¥–æ—Ä–æ–∂–Ω–æ–≥–æ —Å–µ–≥–º–µ–Ω—Ç–∞ (–≤—ã—Ö–æ–¥)
- **üîó –°–æ–µ–¥–∏–Ω–µ–Ω–∏–µ**: –ö—Ä–∞—Å–Ω–∞—è —Å—Ç–æ—Ä–æ–Ω–∞ –æ–¥–Ω–æ–π —è—á–µ–π–∫–∏ = –ó–µ–ª–µ–Ω–∞—è —Å—Ç–æ—Ä–æ–Ω–∞ —Å–æ—Å–µ–¥–Ω–µ–π —è—á–µ–π–∫–∏

### –ü—Ä–∏–º–µ—Ä —Å —Å—Ö–µ–º—ã:
- **Object 1**: –ó–µ–ª–µ–Ω–∞—è —Å—Ç–æ—Ä–æ–Ω–∞ "A" (–Ω–∞—á–∞–ª–æ) ‚Üí –ö—Ä–∞—Å–Ω–∞—è —Å—Ç–æ—Ä–æ–Ω–∞ "C" (–∫–æ–Ω–µ—Ü)
- **Object 2**: –ó–µ–ª–µ–Ω–∞—è —Å—Ç–æ—Ä–æ–Ω–∞ "f" (–Ω–∞—á–∞–ª–æ) ‚Üí –ö—Ä–∞—Å–Ω–∞—è —Å—Ç–æ—Ä–æ–Ω–∞ "C" (–∫–æ–Ω–µ—Ü)
- **–°–æ–µ–¥–∏–Ω–µ–Ω–∏–µ**: –ö—Ä–∞—Å–Ω–∞—è "C" Object 1 = –ó–µ–ª–µ–Ω–∞—è "f" Object 2

## –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω–∞—è –ª–æ–≥–∏–∫–∞

### 1. –§—É–Ω–∫—Ü–∏—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Å—Ç–æ—Ä–æ–Ω—ã —è—á–µ–π–∫–∏
```typescript
const getCellSide = (fromQ: number, fromR: number, toQ: number, toR: number): number => {
  const deltaQ = toQ - fromQ
  const deltaR = toR - fromR
  
  // 0: –ø—Ä–∞–≤–æ, 1: –≤–µ—Ä—Ö-–ø—Ä–∞–≤–æ, 2: –≤–µ—Ä—Ö-–ª–µ–≤–æ, 3: –ª–µ–≤–æ, 4: –Ω–∏–∑-–ª–µ–≤–æ, 5: –Ω–∏–∑-–ø—Ä–∞–≤–æ
  if (deltaQ > 0 && deltaR === 0) return 0      // –ø—Ä–∞–≤–æ
  if (deltaQ > 0 && deltaR < 0) return 1       // –≤–µ—Ä—Ö-–ø—Ä–∞–≤–æ
  if (deltaQ === 0 && deltaR < 0) return 2     // –≤–µ—Ä—Ö-–ª–µ–≤–æ
  if (deltaQ < 0 && deltaR === 0) return 3     // –ª–µ–≤–æ
  if (deltaQ < 0 && deltaR > 0) return 4       // –Ω–∏–∑-–ª–µ–≤–æ
  if (deltaQ === 0 && deltaR > 0) return 5     // –Ω–∏–∑-–ø—Ä–∞–≤–æ
  
  return 0 // –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
}
```

### 2. –§—É–Ω–∫—Ü–∏—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –∑–µ–ª–µ–Ω–æ–π —Å—Ç–æ—Ä–æ–Ω—ã (–≤—Ö–æ–¥)
```typescript
const getEntrySide = (currentQ: number, currentR: number, fromQ: number, fromR: number): number => {
  return getCellSide(fromQ, fromR, currentQ, currentR)
}
```

### 3. –§—É–Ω–∫—Ü–∏—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –∫—Ä–∞—Å–Ω–æ–π —Å—Ç–æ—Ä–æ–Ω—ã (–≤—ã—Ö–æ–¥)
```typescript
const getExitSide = (currentQ: number, currentR: number, toQ: number, toR: number): number => {
  return getCellSide(currentQ, currentR, toQ, toR)
}
```

### 4. –§—É–Ω–∫—Ü–∏—è –≤—ã—á–∏—Å–ª–µ–Ω–∏—è –ø–æ–≤–æ—Ä–æ—Ç–∞ —Å–µ–≥–º–µ–Ω—Ç–∞
```typescript
const calculateSegmentRotation = (entrySide: number, exitSide: number): number => {
  // –í—ã—á–∏—Å–ª—è–µ–º —É–≥–æ–ª –º–µ–∂–¥—É —Å—Ç–æ—Ä–æ–Ω–∞–º–∏ –≤—Ö–æ–¥–∞ –∏ –≤—ã—Ö–æ–¥–∞
  const angleDiff = exitSide - entrySide
  
  // –ù–æ—Ä–º–∞–ª–∏–∑—É–µ–º —É–≥–æ–ª (0-5)
  const normalizedAngle = ((angleDiff % 6) + 6) % 6
  
  // –ï—Å–ª–∏ —Å—Ç–æ—Ä–æ–Ω—ã –ø—Ä–æ—Ç–∏–≤–æ–ø–æ–ª–æ–∂–Ω—ã–µ (—Ä–∞–∑–Ω–∏—Ü–∞ = 3), –¥–æ—Ä–æ–≥–∞ –ø—Ä—è–º–∞—è
  if (normalizedAngle === 3) {
    // –ü—Ä—è–º–∞—è –¥–æ—Ä–æ–≥–∞ - –ø–æ–≤–æ—Ä–∞—á–∏–≤–∞–µ–º –Ω–∞ —É–≥–æ–ª –∑–µ–ª–µ–Ω–æ–π —Å—Ç–æ—Ä–æ–Ω—ã + 30¬∞ –¥–ª—è –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ—Ç —Å—Ç–µ–Ω—ã –∫ —Å—Ç–µ–Ω–µ
    return (entrySide * Math.PI) / 3 + Math.PI / 6
  } else {
    // –ò–∑–æ–≥–Ω—É—Ç–∞—è –¥–æ—Ä–æ–≥–∞ - –ø–æ–≤–æ—Ä–∞—á–∏–≤–∞–µ–º –Ω–∞ —É–≥–æ–ª –º–µ–∂–¥—É –∑–µ–ª–µ–Ω–æ–π –∏ –∫—Ä–∞—Å–Ω–æ–π —Å—Ç–æ—Ä–æ–Ω–∞–º–∏
    const midAngle = (entrySide + exitSide) / 2
    return (midAngle * Math.PI) / 3 + Math.PI / 6
  }
}
```

## –õ–æ–≥–∏–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è

### –ü—Ä–∏–Ω—Ü–∏–ø —Ä–∞–±–æ—Ç—ã:
1. **–û–ø—Ä–µ–¥–µ–ª—è–µ–º –∑–µ–ª–µ–Ω—É—é —Å—Ç–æ—Ä–æ–Ω—É** (–æ—Ç–∫—É–¥–∞ –ø—Ä–∏—à–ª–∏)
2. **–û–ø—Ä–µ–¥–µ–ª—è–µ–º –∫—Ä–∞—Å–Ω—É—é —Å—Ç–æ—Ä–æ–Ω—É** (–∫—É–¥–∞ –∏–¥–µ–º)
3. **–í—ã—á–∏—Å–ª—è–µ–º –ø–æ–≤–æ—Ä–æ—Ç** —Å–µ–≥–º–µ–Ω—Ç–∞ –æ—Ç –∑–µ–ª–µ–Ω–æ–π –∫ –∫—Ä–∞—Å–Ω–æ–π —Å—Ç–æ—Ä–æ–Ω–µ
4. **–°–æ–µ–¥–∏–Ω—è–µ–º** –∫—Ä–∞—Å–Ω—É—é —Å—Ç–æ—Ä–æ–Ω—É –æ–¥–Ω–æ–π —è—á–µ–π–∫–∏ —Å –∑–µ–ª–µ–Ω–æ–π —Å—Ç–æ—Ä–æ–Ω–æ–π —Å–æ—Å–µ–¥–Ω–µ–π

### –ü—Ä–∏–º–µ—Ä —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è:
```
–Ø—á–µ–π–∫–∞ A: –ó–µ–ª–µ–Ω–∞—è —Å—Ç–æ—Ä–æ–Ω–∞ 2 ‚Üí –ö—Ä–∞—Å–Ω–∞—è —Å—Ç–æ—Ä–æ–Ω–∞ 5
–Ø—á–µ–π–∫–∞ B: –ó–µ–ª–µ–Ω–∞—è —Å—Ç–æ—Ä–æ–Ω–∞ 2 ‚Üí –ö—Ä–∞—Å–Ω–∞—è —Å—Ç–æ—Ä–æ–Ω–∞ 0
–°–æ–µ–¥–∏–Ω–µ–Ω–∏–µ: –ö—Ä–∞—Å–Ω–∞—è —Å—Ç–æ—Ä–æ–Ω–∞ 5 (A) = –ó–µ–ª–µ–Ω–∞—è —Å—Ç–æ—Ä–æ–Ω–∞ 2 (B)
```

## –û—Ç–ª–∞–¥–æ—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

–î–æ–±–∞–≤–ª–µ–Ω—ã –ª–æ–≥–∏ –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è:
```typescript
console.log(`üîó –Ø—á–µ–π–∫–∞ (${q},${r}): –ó–µ–ª–µ–Ω–∞—è —Å—Ç–æ—Ä–æ–Ω–∞ ${entrySide} ‚Üí –ö—Ä–∞—Å–Ω–∞—è —Å—Ç–æ—Ä–æ–Ω–∞ ${exitSide}`)
```

## –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è —Å—Ç–æ—Ä–æ–Ω

### –ù—É–º–µ—Ä–∞—Ü–∏—è —Å—Ç–æ—Ä–æ–Ω (0-5):
```
       2
   3       1
       0
   4       5
```

### –ü—Ä–∏–º–µ—Ä—ã –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–π:
- **0**: –ø—Ä–∞–≤–æ
- **1**: –≤–µ—Ä—Ö-–ø—Ä–∞–≤–æ  
- **2**: –≤–µ—Ä—Ö-–ª–µ–≤–æ
- **3**: –ª–µ–≤–æ
- **4**: –Ω–∏–∑-–ª–µ–≤–æ
- **5**: –Ω–∏–∑-–ø—Ä–∞–≤–æ

## –¢–∏–ø—ã —Å–µ–≥–º–µ–Ω—Ç–æ–≤

### –ü—Ä—è–º–æ–π —Å–µ–≥–º–µ–Ω—Ç:
- **–£—Å–ª–æ–≤–∏–µ**: `Math.abs(entrySide - exitSide) === 3`
- **–ü–æ–≤–æ—Ä–æ—Ç**: –ù–∞ —É–≥–æ–ª –∑–µ–ª–µ–Ω–æ–π —Å—Ç–æ—Ä–æ–Ω—ã + 30¬∞
- **–ü—Ä–∏–º–µ—Ä**: –ó–µ–ª–µ–Ω–∞—è —Å—Ç–æ—Ä–æ–Ω–∞ 0 ‚Üí –ö—Ä–∞—Å–Ω–∞—è —Å—Ç–æ—Ä–æ–Ω–∞ 3

### –ò–∑–æ–≥–Ω—É—Ç—ã–π —Å–µ–≥–º–µ–Ω—Ç:
- **–£—Å–ª–æ–≤–∏–µ**: `Math.abs(entrySide - exitSide) !== 3`
- **–ü–æ–≤–æ—Ä–æ—Ç**: –ù–∞ —Å—Ä–µ–¥–Ω–∏–π —É–≥–æ–ª –º–µ–∂–¥—É –∑–µ–ª–µ–Ω–æ–π –∏ –∫—Ä–∞—Å–Ω–æ–π —Å—Ç–æ—Ä–æ–Ω–∞–º–∏ + 30¬∞
- **–ü—Ä–∏–º–µ—Ä**: –ó–µ–ª–µ–Ω–∞—è —Å—Ç–æ—Ä–æ–Ω–∞ 0 ‚Üí –ö—Ä–∞—Å–Ω–∞—è —Å—Ç–æ—Ä–æ–Ω–∞ 1

## –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –Ω–æ–≤–æ–π –ª–æ–≥–∏–∫–∏

1. **‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ**: –ö—Ä–∞—Å–Ω–∞—è —Å—Ç–æ—Ä–æ–Ω–∞ = –ó–µ–ª–µ–Ω–∞—è —Å—Ç–æ—Ä–æ–Ω–∞ —Å–æ—Å–µ–¥–∞
2. **‚úÖ –õ–æ–≥–∏—á–Ω—ã–µ –ø–æ–≤–æ—Ä–æ—Ç—ã**: –°–µ–≥–º–µ–Ω—Ç—ã –ø–æ–≤–æ—Ä–∞—á–∏–≤–∞—é—Ç—Å—è –æ—Ç –∑–µ–ª–µ–Ω–æ–π –∫ –∫—Ä–∞—Å–Ω–æ–π —Å—Ç–æ—Ä–æ–Ω–µ
3. **‚úÖ –ï–¥–∏–Ω–∞—è –¥–æ—Ä–æ–≥–∞**: –í—Å–µ —Å–µ–≥–º–µ–Ω—Ç—ã —Ñ–æ—Ä–º–∏—Ä—É—é—Ç –Ω–µ–ø—Ä–µ—Ä—ã–≤–Ω—ã–π –ø—É—Ç—å
4. **‚úÖ –û—Ç–ª–∞–¥–∫–∞**: –ü–æ–¥—Ä–æ–±–Ω—ã–µ –ª–æ–≥–∏ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç–∏

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:
1. **–û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞**
2. **–°–æ–∑–¥–∞–π—Ç–µ –æ–±—ä–µ–∫—Ç—ã** –∏ –Ω–∞–∂–º–∏—Ç–µ "üõ£Ô∏è Test Roads"
3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏** - –¥–æ–ª–∂–Ω—ã –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –∑–µ–ª–µ–Ω—ã–µ –∏ –∫—Ä–∞—Å–Ω—ã–µ —Å—Ç–æ—Ä–æ–Ω—ã
4. **–ù–∞–±–ª—é–¥–∞–π—Ç–µ** –∑–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ–º —Å–µ–≥–º–µ–Ω—Ç–æ–≤

### –û–∂–∏–¥–∞–µ–º—ã–µ –ª–æ–≥–∏:
```
üîó –ü–µ—Ä–≤–∞—è —è—á–µ–π–∫–∞ (1,0): –ó–µ–ª–µ–Ω–∞—è —Å—Ç–æ—Ä–æ–Ω–∞ 3 ‚Üí –ö—Ä–∞—Å–Ω–∞—è —Å—Ç–æ—Ä–æ–Ω–∞ 0
üîó –Ø—á–µ–π–∫–∞ 0 (1,0): –ó–µ–ª–µ–Ω–∞—è —Å—Ç–æ—Ä–æ–Ω–∞ 3 ‚Üí –ö—Ä–∞—Å–Ω–∞—è —Å—Ç–æ—Ä–æ–Ω–∞ 0
üîó –ü–æ—Å–ª–µ–¥–Ω—è—è —è—á–µ–π–∫–∞ (2,0): –ó–µ–ª–µ–Ω–∞—è —Å—Ç–æ—Ä–æ–Ω–∞ 3 ‚Üí –ö—Ä–∞—Å–Ω–∞—è —Å—Ç–æ—Ä–æ–Ω–∞ 0
```

## –°—Ç–∞—Ç—É—Å

‚úÖ **–ó–∞–≤–µ—Ä—à–µ–Ω–æ**: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ª–æ–≥–∏–∫–∏ —Å–æ–≥–ª–∞—Å–Ω–æ —Å—Ö–µ–º–µ
‚úÖ **–ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–æ**: –í –æ—Å–Ω–æ–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
‚úÖ **–û—Ç–ª–∞–¥–∫–∞**: –î–æ–±–∞–≤–ª–µ–Ω—ã –ª–æ–≥–∏ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏
üîÑ **–°–ª–µ–¥—É—é—â–∏–π —ç—Ç–∞–ø**: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç–∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è

## –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç

–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ª–æ–≥–∏–∫–∏:
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∑–µ–ª–µ–Ω—ã—Ö –∏ –∫—Ä–∞—Å–Ω—ã—Ö —Å—Ç–æ—Ä–æ–Ω
- ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –ø–æ–≤–æ—Ä–æ—Ç—ã —Å–µ–≥–º–µ–Ω—Ç–æ–≤ –æ—Ç –∑–µ–ª–µ–Ω–æ–π –∫ –∫—Ä–∞—Å–Ω–æ–π —Å—Ç–æ—Ä–æ–Ω–µ
- ‚úÖ –ù–µ–ø—Ä–µ—Ä—ã–≤–Ω–æ–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –º–µ–∂–¥—É —è—á–µ–π–∫–∞–º–∏
- ‚úÖ –ï–¥–∏–Ω–∞—è –¥–æ—Ä–æ–≥–∞ –æ—Ç –æ–±—ä–µ–∫—Ç–∞ –∫ –æ–±—ä–µ–∫—Ç—É
